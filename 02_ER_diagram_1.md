# ER図1

カート(元の名前)を受注詳細と見なしていたのでカートと考え直しました。

## 全体
- 住所を管理するテーブルがない
- 入荷したものを管理する場所がない
- すべてのテーブルにデフォルトで作られる登録日と更新日のカラムがない
- 商品の値段が変わったときに購入履歴として購入時の値段が確認できない → 格納する受注詳細テーブルが必要

## 商品テーブル
- ディスクが2枚以上あった時に対応できない
- 商品とジャンル・レーベル・アーティストが1:多の関係なのに別テーブルにしていない
- 商品と曲が1:多なのに別テーブルにしていない
- 商品を論理削除するためのカラムがない
- ステータス(取り扱い)は在庫数から判断できるので不要
- ステータスと在庫数カラムが不要
- 入荷カラムが必要

## 管理人テーブル
- ユーザーテーブルに親子関係で繋がっている。

## カートテーブル
- 多数の決済テーブルを持っている
- PKが注文idになっている → カートid
- アーティスト名・ジャケット画像・シングル/アルバム名カラムは商品テーブルから引っ張ってこれるので不要
- ユーザーテーブルが必要(商品とユーザーの中間テーブル的な役割のため)

## 決済テーブル
- 注文情報をまとめているのでテーブル名が不適切 決済テーブル → 受注テーブル(管理者の行為のため) 
- カートテーブルとのリレーションは不要(情報を引っ張ってくる必要がないため)
- 合計金額や送料を入れるカラムがない
- 送付先住所のみではなく、送付先の名前、郵便番号、電話番号を格納するカラムも必要
- 購入日はデフォルトで作られる作成日と同じなので不要
- 購入履歴テーブルと1:多の関係のリレーションは不要(そもそも購入履歴テーブルが不要)

## エンドユーザーテーブル
- 論理削除するためのカラムがない

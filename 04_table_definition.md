ーーーーーーーテーブル定義書1ーーーーーーー

## 全体
- 全てのテーブルに関して言えることですが、主キーである、○○_idの命名はrailsによって自動的にidという名前になります。主キーがないテーブルには主キーを追加してください。
- テーブル名の命名規則に基づいてるか確認してください。
  * テーブルの命名規則は、
    単一単語の場合：先頭小文字・複数形　例 posts
    複数単語の場合：先頭小文字・スネーク・複数形  例  post_images
    となります。
  * テーブル名は全て小文字にしなければいけないので、全てのテーブル名の修正が必要です。
- カラム名がの命名規則に基づいてるか確認してください。
  * テーブルの命名規則は、
    単一単語の場合：先頭小文字　例 name
    複数単語：先頭小文字・スネーク  例  created_at
    となります。
  * カラム名は全て小文字にしなければいけないです。
  * テーブル中にカラムが複数、存在するという構造なので、テーブル名とカラム名で同じ言葉を使うことは避けましょう。コードを書く際に間違いの元となります。
　例　genresテーブルに「genre_name」カラムが存在している。→「name」カラムに修正。（genreのnameだということは自明のため。）
- テーブル名、カラム名は「管理者視点」での命名を心がけてください。あくまでもアプリケーションの設計は管理者側によって行われるものであるためです。

## Users
- テーブル名が「users」ですと、エンドユーザか管理者のどちらの「user」を表しているのか分かりにくいです。テーブル名は管理者視点での命名を心がけましょう。
- user_l_nameとありますが、この「l」が何を表しているのか、第三者には伝わりにくいです。基本的にカラム名に用いる英単語は省略しないようにしましょう。user_f_nameや他の略された英単語（num等）についても同様です。
- 郵便番号や、電話番号はintegerではなく、string型を用いましょう。以下理由です。
基本的にこれらの項目は、
  * 先頭のゼロに意味がある
  * 計算に使う値ではない
という理由で、integerでは持たないことが多いです。
- 退会ステータスを表すカラムのデータは「退会してない」「退会してる」の二択なので、boolean型(TRUE/FALSE)で表すようにしましょう。ステータスを「退会している」「退会していない」などで表現すると、データが重くなってしまったり、間違いの原因の１つになります。他のステータスを表すカラムについても同様です。(ヒント；boolean型とenumの使い分け)
- 退会ステータスを表すカラム名ですが、「member_status」となっていますが、この場合、テーブル名「user」とカラム名「member」で異なる言葉が使われており、間違いの原因となります。何のステータスを表すのか明確にするようにしましょう。
- 配送先は、複数選択できませんか？現状、usersテーブルの「ship_address」に入っている住所のみ使えるように見えます。住所データを複数選択するようにするためにどのような手段が考えられるでしょうか。

## Products
- ジャケット画像を格納するカラムは、refileの書き方に基づくと、
  * 〇〇_idというカラム名にする
  * ただし、データ型はintegerではなく、stringである点に注意してください。
- 「notax」は二語以上の言葉の繋がりなので、「no_tax」にしましょう。
- 他テーブルとのリレーションに使用するカラム("XXX_id")には、制約としてFKの列に印をつけておく必要があります。
  * genre_id
  * label_id
  * artist_id
  に関して、再度確認をお願いします。
- discs_idは必要ですか？ productsテーブルと、discsテーブルの関係性を再度考えてください。1対Nの関係性において、どちらがN側のテーブルかに注目してください。
- 「在庫数」と「在庫ステータス」カラムですが、在庫数を常にカラムに保存することはあまり推奨されません。代わりに入荷数を入れるためのカラムを作成しましょう。「ストック数」データと「入荷数」データが計算処理された後の「在庫数」がデータベースに保管されている場合、間違いが生じやすいためです。
　* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。

## Discs
- 商品ID(FK)が"products_id"となっていますが、product_idに変える必要があります。
- ”track_num”は具体的に何の情報を示すカラムか、第三者に明白に伝わるようにしましょう。 

## Songs
- songsテーブルにある、songカラムとなると、テーブル名とカラム名が一致してしまっており、実装で記述する際に混乱してしまうことが多いです。カラム名をnameなどに変更しましょう。
   *ヒント；　genresテーブルに「genre」カラムが存在している。→「name」カラムに修正。（genreのnameだということは自明のため。）
  - また、カラムがInteger型になっています。正しいデータ型が何かもう一度考えてください。
- 曲順はどのように管理しますか。

## Artists 
- songカラムと同様の理由です。artistカラムをnameなどに変更しましょう。

## Genre
- songカラムと同様の理由です。genreカラムをnameなどに変更しましょう。

## Labels
- songカラムと同様の理由です。labelカラムをnameなどに変更しましょう。

## Cart item
- 商品ID(FK)が"products_id"となっていますが、product_idに変える必要があります。また、このカラムのデータ型の記載がありません。
- 小計金額として"subtotal"というカラムを設けていますが、必要ありません。仮に商品の価格が変更された場合、全てのエンドユーザーの小計金額を変更する必要があり、大量のデータ変更が求められ、サーバーへの負荷となるためです。
- buy numカラムとありますが、文字の連なりを_(アンダーバー)で結んであげないといけません。他のスペースでつなげている文字も同様です。また、カラム名にnumのような略語は推奨されません。

## Buy details
- Cart itemで理由を記載しましたが、buy numカラムの命名についてもう一度考えてください。また、Buy detailsテーブルとありますが、buy「購入」という言葉はエンドユーザー視点からの命名となっています。設計図は、管理者側視点で命名されることが望ましいです。この場合、「注文」もしくは「受注」という意味を表す、「orders」などの言葉が望ましいです。
- 購入詳細情報が商品テーブルと結びついていません。もう一度確認してください。

## Buy
- Buy detailsで触れましたが、テーブル名を管理者視点で命名しましょう。
- "buy_details_id"は必要ありません。BuyテーブルとBuy detailsテーブルの関係性をもう一度見直しましょう。1対Nの関係性において、どちらがN側のテーブルかに注目してください。
- 支払い方法のカラムが"pay"になっていますが、支払いの方法なのか、合計なのか、何を表しているのか判断しづらいです。また、支払い方法は限定された選択肢で表すことが可能です。enumで調べてみてください。また、enumを使用した際、データ型は何になりますか。
- 支払い合計のカラムが"stock"になっていますが、「貯蓄、株式」という意味になるので別の単語を使用する必要があります。
- 送付先住所のカラムがありますが、これだけですと「郵便番号」「氏名」「住所」全てをこちらに入れ込む必要が生じるので問題です。usersテーブルに保管された住所情報をどのように保管するか再考しましょう。

ーーーーーーーテーブル定義書2ーーーーーーー


## 全体
- 全てのテーブルに関して言えることですが、主キーである、○○_idの命名はrailsによって自動的にidという名前になります。主キーがないテーブルには主キーを追加してください。
- テーブル名の命名規則に基づいてるか確認してください。
  * テーブルの命名規則は、
    単一単語の場合：先頭小文字・複数形　例 posts
    複数単語の場合：先頭小文字・スネーク・複数形  例  post_images
    となります。
  * テーブル名は全て小文字にしなければいけないので、全てのテーブル名の修正が必要です。
- カラム名がの命名規則に基づいてるか確認してください。
  * テーブルの命名規則は、
    単一単語の場合：先頭小文字　例 name
    複数単語：先頭小文字・スネーク  例  created_at
    となります。
  * カラム名は全て小文字にしなければいけないです。
  * テーブル中にカラムが複数、存在するという構造なので、テーブル名とカラム名で同じ言葉を使うことは避けましょう。コードを書く際に間違いの元となります。
　例　genresテーブルに「genre_name」カラムが存在している。→「name」カラムに修正。（genreのnameだということは自明のため。）

## users
- テーブル名が「users」ですと、エンドユーザか管理者のどちらの「user」を表しているのか分かりにくいです。テーブル名は管理者視点での命名を心がけましょう。
- user_l_nameとありますが、この「l」が何を表しているのか、第三者には伝わりにくいです。基本的にカラム名に用いる英単語は省略しないようにしましょう。user_f_nameや他の略された英単語（num等）についても同様です。
- 退会ステータスを表すカラム名ですが、「member_status」となっていますが、この場合、テーブル名「user」と「member」で異なる言葉が使われており、間違いの原因となります。何のステータスを表すのか明確にするように心がけましょう。
- 全体への指摘通り、カラム名の見直しをお願いします。
  * user_ooとなっているカラム
例 usersテーブルに「user_name」カラムが存在している。→「name」カラムに修正。（userのnameだということは自明のため。）

## ships
- 全体への指摘通り、カラム名の見直しをお願いします。
  * ship_ooとなっているカラム
例 shipsテーブルに「ship_name」カラムが存在している。→「name」カラムに修正。（shipのnameだということは自明のため。）

## products
- 全体への指摘通り、カラム名の見直しをお願いします。
  * notax_priceカラム → no_tax_price
  * products_priceカラム→ product_price
- 「在庫数」と「在庫ステータス」カラムですが、在庫数を常時、カラムに保存することは推奨されません。代わりに入荷数を入れるためのカラムを作成しましょう。「ストック数」データと「入荷数」データが計算処理された後の「在庫数」がデータベースに保管されている場合、間違いが生じやすいためです。
　* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。

## discs
- productテーブルの指摘で触れましたが、products_priceカラムの名前を変更してください。
- disc_numのnumような省略された言葉を使うことは避けましょう。 num→number

## songs
- 全体への指摘通り、カラム名の見直しをお願いします。
  * songカラム → nameカラムなど

## labels
- 全体への指摘通り、カラム名の見直しをお願いします。
  * labelカラム → nameカラムなど

## artists
- 全体への指摘通り、カラム名の見直しをお願いします。
  * artistカラム → nameカラムなど

## genres
- 全体への指摘通り、カラム名の見直しをお願いします。
  * genreカラム → nameカラムなど

## cart items
- 全体への指摘通り、テーブル名の見直しをお願いします。
  * cart items → cart_items
- 全体への指摘通り、カラム名の見直しをお願いします。
  * Cart item_id → cart_item_id
  * buy num カラムに関しては、意味が伝わりづらいため、「count」「amount」などの言葉を使いましょう。


## sells_details
- 「sell」といった動詞を用いたテーブル名ですと、意味が伝わりづらいです。管理者側視点から「注文」の意味を持つ「orders」などの名詞を使いましょう。
- 全体への指摘通り、カラム名の見直しをお願いします。
  * sell_details_Id → sell_detail_id
  * sell_num → sell_number

## sells
- 繰り返しになりますが、「sell」といった動詞を用いたテーブル名ですと、意味が伝わりづらいです。管理者側視点から「注文」の意味を持つ「orders」などの名詞を使いましょう。
- こちらのテーブルに購入詳細IDは不要です。「sells」と「sells_details」テーブルの関係性をもう一度見直してください。1対Nの関係性において、どちらがN側のテーブルかに注目してください。
- 支払い方法のカラムが"pay"になっていますが、支払いの方法なのか、合計なのか、何を表しているのか判断しづらいです。

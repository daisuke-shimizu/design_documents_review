# テーブル定義書1

- [attention] どのテーブルに対しての指摘かわかりやすくするために、テーブル名を見出しとして付けましょう。

## 全体
- 全てのテーブルに関して言えることですが、主キーである、○○_idの命名はrailsによって自動的にidという名前になります。
- [add] テーブル名の命名規則が合っているか確認してください。確認後、下記の内容を追記してください。
  - テーブル名の命名規則
  - テーブル名の命名規則が誤っているテーブル
- [add] 各テーブルのカラム名について、テーブル名を接頭語とする必要はありません。
  - 例えば、usersテーブルでメールアドレスを表すカラムは、 `user_email` ではなく `email` となります。
  - 各テーブルにおいて該当するカラムがあれば、追加で指摘してください。

## Users
- user_l_nameとありますが、このlが何を表しているのか、第三者には伝わりにくいです。基本的にカラム名に用いる英単語は省略しないようにしましょう。user_f_nameや他の略された英単語（num等）についても同様です。

- 郵便番号や、電話番号はintegerではなく、string型を用いましょう。
基本的にこれらの項目は、
* 先頭のゼロに意味がある
* 計算に使う値ではない
という理由で、integerでは持たないことが多いです。

- 退会ステータスを表すカラムのデータは 0 or 1で表すようにしましょう。そのため、データ型はintegerになります。ステータスを「退会している」「退会していない」などで表現すると、データが重くなってしまう原因の１つになります。他のステータスを表すカラムについても同様です。
  - [attention] 退会ステータスのように、YesかNoか二択の場合は、boolean型(TRUE/FALSE)を使うことが多いです。レビュー文を見直しましょう。
  - [attention] 加えて、退会ステータスの物理名として"member_status"より良い命名があります。こちらについても追記しましょう。
  
- [add] 配送先をこのテーブル以外で指定する必要がありますが、指定できる場所が見当たりません。配送先の指定を促すよう、レビュー文を考えましょう。(docbaseの観点も参考にしてください。)


## Products
- ジャケット画像を格納するカラムは画像のidを格納するはずなので、image_idのようなカラム名がいいです。また、もちろんこれらはintegerとなります。
  - [attention] 例えばrefileを使用する場合は、image_idはintegerだったでしょうか。一部文面を見直してみましょう。

- notaxという英単語は適切でないです。no_taxにしましょう。

- [add] 他テーブルとのリレーションに使用するカラム("XXX_id")には、制約としてFKの列に印をつけておく必要があります。反映されていないものを列挙し、指摘事項に加えましょう。
- [add] discs_idは必要ありません。必要ない理由を考え、レビュー文に追記しましょう。
- [add] "stock_status"は在庫カラムですが、必要ありません。必要ない理由を考え、レビュー文に追記しましょう。
- [add] 在庫数カラムですが、必要ありません。必要ない理由を考え、レビュー文に追記しましょう。

## [add]Discs
- [add] 商品ID(FK)が"products_id"となっていますが、product_idに変える必要があります。
- [add] ”track_no”はディスクに対して持たせる情報ではありません。どこのテーブルに移動させるのが適切か考え、レビュー文に追記しましょう。
- [add] 複数枚組が考慮されていません。

## [add]Songs
- [add] 曲名カラムは、"name"や"title"など、名前を示す単語で命名する必要があります。
  - このテーブル以外にも同様の事例(名前を表すカラムがテーブル名と同じになってるケース)が存在するので、それぞれレビューに追記してください。
  - また、このカラムはInteger型になっています。

## genre
- テーブル名は複数形になります。genreテーブルではなく、genresテーブルに変更しましょう。他の単数形になっているテーブルに関しても同様です。

- genreテーブルにある、genreカラムとやってしまうと、テーブル名とカラム名が一致してしまっており、実装で記述する際に混乱してしまうことが多いです。カラム名をgenre_nameなどに変更しましょう。

## Cart item
- [add] 商品ID(FK)が"products_id"となっていますが、product_idに変える必要があります。
  - また、このカラムのデータ型の記載がありません。
- [add] 小計金額として"subtotal"というカラムを設けていますが、カート内商品のテーブルには必要ありません。必要ない理由を考え、レビュー文に記載しましょう。
- buy numカラムとありますが、文字の連れなりを_(アンダーバー)で結んであげないといけません。他のスペースでつなげている文字も同様です。
  - [attention] 連れなり → 連なり
  - [attention] 略語になっているので、その点もレビューに追記してください。
  - [attention] Cart itemとbuy_detailsの両方に"buy_num"というカラムが存在していたので、提出された文だけだとどちらのテーブルか判別つきませんでした。どのテーブルについて言及しているかは必ず明記してください。

## buy_details
- [add]こちらでもbuy numについて言及が必要です。

## Buy
- Buyテーブルとありますが、buy「購入」という意味ではエンドユーザー視点のみの命名となってしまっています。ordersテーブルなどに変更しましょう。
  - [attention]"buy"がNGな理由はOKです。なぜ”orders”が適切なのか考え、追記してください。
- [add]"buy_details_id"は必要ありません。必要ない理由を考え、レビュー文に記載しましょう。
- [add]支払い方法のカラムが"pay"になっていますが、支払いの方法なのか、合計なのか、何を表しているのか判断しづらいです。適切な単語に誘導するよう、レビュー文に追記しましょう。
  - また、このカラムはstringで適切でしょうか。
- [add]支払い合計のカラムが"stock"になっていますが、「貯蓄、株式」という意味になるので別の単語を使用する必要があります。適切な単語に誘導するよう、レビュー文に追記しましょう。
- [add]送付先住所のカラムがありますが、これだけだと「郵便番号」「氏名」「住所」全てをこちらに入れ込む必要が生じるので問題です。何が問題なのかを具体的に明記した上で、レビュー文を追記してください。

# テーブル定義書2
**※ テーブル定義書1での指摘事項をヒントに、こちらも書き換えてみましょう。**

- 全てのテーブルに関して言えることですが、主キーである、○○_idの命名はrailsによって自動的にidという名前になります。

- user_l_nameとありますが、このlが何を表しているのか、第三者には伝わりにくいです。基本的にカラム名に用いる英単語は省略しないようにしましょう。user_f_nameや他の略された英単語（num等）についても同様です。

- usersテーブルとありますが、これはエンドユーザーのことか管理者のことかわかりにくいです。エンドユーザーのことであれば、end_user等に変更しましょう。

- cart itemsテーブルとありますが、単語のつながりを表現するときは単語同士を_でつなげてあげましょう。buy numも同様です。

- genresテーブルの中のgenreカラムとなっていますが、テーブル名と同じ名前のカラムがありますと、実装の段階で間違える原因の１つになります。
genre_name等に変更しましょう。

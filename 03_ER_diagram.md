ーーーーーーーER図1ーーーーーーーー

## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日の記述もお願いいたします。もし持たないのであれば理由を教えてください。

## エンドユーザーテーブル
- ユーザーテーブルが管理者IDを持つ必要はあるでしょうか。エンドユーザがどの管理者に紐ついているかといった情報は必要でしょうか。
- エンドユーザが退会した場合、該当のレコードはどうなりますか。
    * 退会してしまったユーザーとやりとりが完全にできなくなってしまいます。
- 住所は各ユーザーごとに１つしか持てませんか。例えば、エンドユーザが別居しているパートナーに商品を購入して送りたいという場合、サブの住所があれば可能ですね。

## 商品テーブル
- 「シングルアルバム内の曲名カラム」とありますが、１つの商品に数曲入っていると考えると、非常に膨大な数の情報を商品テーブルに入れることになってしまいます。
    * 1曲だけ曲名を変更したい・1曲だけ削除したい、など、後からデータを変更する際に不便になります。
    * 複数ディスク、曲順などの管理も難しくなります。
    * ユーザー側に表示するときにデザインも当てづらくなります。
    * カリキュラム「チーム開発の手引き」＞「設計」＞「データベース設計」＞スライド28枚目以降を再確
    認してください。
- 商品が削除された場合、該当のレコードはどうなりますか。
    * 商品が削除された後、その商品の過去の取引データが完全に失われてしまいます。
- ステータス(取り扱い)は、具体的に何の取り扱いについて管理するものでしょうか。第三者にもわかる命名をしましょう。
- 発売日はどのように管理しますか。
- 在庫数カラムとありますが、常に「ストック数」と「入荷数」が計算処理された後の「在庫数」がデータベースに保管されている場合、間違いが生じやすいです。
　* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。

## カートテーブル
- カートテーブルにおいて、どのユーザーのカートなのかという情報が必要です。
- カートテーブルという命名ですが、表現されているのは「カートの中身」かと思います。
  カートは一つ、その中に入っている商品は複数、というイメージかと思いますので、
  テーブル名を「カートアイテム」「カート内商品」のような命名にすると良いかと思います。
- 「合計金額カラム」とありますが、商品の価格が変更された場合、このテーブルのデータはどうなりますか？
- このテーブルでアーティスト名、ジャケット画像、シングル/アルバム名のカラムを持つ必要はありません。(商品idをFKとして持っているので、商品テーブルから引用できます。)
- PKが「注文ID」となっており、テーブル名と乖離しています。

## 決済テーブル
- テーブル名が「決済テーブル」となっておりますが、命名をもう一度考えましょう。
    *　決済を行うのはエンドユーザー側です。基本的に、テーブルの名前は管理者側の視点で、命名します。
    *  「決済テーブル」という命名ですと、「支払いに関するデータのみを扱うものと誤解する」可能性が生じます。第三者からみて分かりやすい命名を心がけましょう。  
- 購入日カラムは、ActiveRecordでデフォルトで作られる登録日で代用できます。
- 住所カラムがあるものの、郵便番号・氏名を入れるカラムが存在しません。送り先の情報はどのように保存しますか。
- 送料や合計金額情報は決済時に必要な情報になりますが、現状ですと、保存する場所がないです。
- 発送状況はどのように管理されますか。
- カートテーブルと決済テーブルの関係性をもう一度考えましょう。
    *　カート内に複数商品があり、それらをまとめて決済するはずです。
    *　上記の点から、カートIDをFKとして持つ必要がなくなります。

## 購入履歴テーブル
- テーブル名の再考をお願いします。すでに触れましたが、命名は管理者からの視点で行うのが適切です。
- 購入ステータスがこのテーブルにあるのは適切ではありません。購入ステータス(注文受付・発送準備中・発送済など)は、受注ごとに管理されるべきで、商品ごとに管理されるものではないからです。**
- 最終的に何をどれくらい購入されたかという情報はどこに保存されるようにしましょう。その情報が購入履歴になります。

## 管理人テーブル
- すでに触れましたが、エンドユーザーテーブルとリレーションが存在する理由は何かありますでしょうか。
- 同じく、商品とのリレーションは必要ですか。

## その他、追加で必要なテーブル
- すでに触れましたが、ユーザの登録住所以外にも、配送先を複数持てるようにしてほしいです。
（amazonのような形式が理想です）
- 曲順はどのように管理しますか。
- アーティスト名はどのように管理しますか。アーティスト名だけで独立したテーブルを作ることにより、例えば、「AKB 48」「AKB48」など同じ情報を１つのカラムにまとめることができます。
- 店側への問い合わせはどのように保存されますか。
- 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、
どのように実現しますか。


ーーーーーーーER図2ーーーーーーーー

## 全体
- それぞれのテーブルのリレーションをもう一度見直して欲しいです。具体的な修正箇所につきましては、各テーブルの指摘部分で触れます。

## エンドユーザー
- 姓名の名カラムがなくなっています。間違えて消してしまっただけだと思いますが、もう一度作ってください。
- 住所は各ユーザーごとに１つしか持てませんか。例えば、エンドユーザが別居しているパートナーに商品を購入して送りたいという場合、サブの住所があれば可能ですね。

 ## 商品テーブル
- １つのディスクが複数商品を持つことになっていますが、正しいでしょうか。
- 「ディスク枚数」とありますが、これはディスクテーブルのデータから算出できるデータかと思います。
　このカラムを持っている理由はありますか？
- 商品が削除された場合、該当商品のレコードはどうなりますか。全て消えてしまった場合、エンドユーザのカートアイテムをはじめとした様々なデータに、影響が及びます。
- 発売日はどのように管理しますか。
- 在庫数カラムとありますが、常に「ストック数」と「入荷数」が計算処理された後の「在庫数」がデータベースに保管されている場合、間違いが生じやすいです。
　* 運営上、「いつ、どの商品が入荷したか」という情報を管理しておく方が安全な運用です。

 ## ディスクテーブル
 - トラックNo.カラムとありますが、第三者から見て分かりやすいカラムの命名をお願いします。
 - 曲テーブルとディスクテーブルの関係性をもう一度再考してください。
 - 商品テーブルとディスクテーブルの関係性をもう一度再考してください。

 ## 曲テーブル
 - 曲順はどのように管理しますか。
 - 曲テーブルとディスクテーブルの関係性をもう一度再考してください。
 
 ## カートアイテムテーブル
 - 「小計金額」とありますが、もし商品の価格が変更された場合、このカラムのデータはどうなりますか？商品の価格が急に変更された場合、全てのエンドユーザーのカートアイテムの情報を同時に変えなければ言えないことになります。

 ## 購入テーブル
 - 「購入テーブル」という名前ですが、テーブルの命名はエンドユーザー視点でお願いします。データベースの情報は管理者が利用するためです。
 
 ## 購入詳細テーブル
 - すでに触れた指摘ですが、「購入詳細テーブル」という命名を再考してください。命名はエンドユーザー視点でお願いします。
 - 商品テーブルとのリレーションがありませんが、購入履歴はどのように保存しますか。
 
## 管理人テーブル
- すでに触れましたが、エンドユーザーテーブルとリレーションが存在する理由は何かありますでしょうか。
- 同じく、商品とのリレーションは必要ですか。
 
 ## その他、追加で必要なテーブル
- すでに触れましたが、ユーザの登録住所以外にも、配送先を複数持てるようにしてほしいです。
（amazonのような形式が理想です）
- 店側への問い合わせはどのように保存されますか。
- 要件に「入荷履歴を表示できること（入荷した日時、入荷した商品、個数）」がありますが、
どのように実現しますか。

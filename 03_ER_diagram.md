# テンプレート

## テーブル名
- 指摘事項
- 指摘事項
- 指摘事項

## テーブル名
- 指摘事項
- 指摘事項
- 指摘事項

* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

# ER図1(提出済のもの)

## [全体を通した指摘]
**- 全体的に、もう少しトピックを細かく分割して伝えるようにしましょう**
  - 受講生に対してどこを直すべきか具体的に細分化した方が、修正するべきポイントを確認しやすいですし、再提出があった時に、前回の指摘内容と照らし合わせることが容易にもなるため、チェック漏れを防げます。
**- テーブル名を見出しとして使用しましょう**
  - どのテーブルについて指摘しているのか一目見てわかるように、見出しにテーブル名を使用して下さい。
  - こちらも修正ポイントの確認や、チェック漏れ防止に繋がります。
  
### 修正ポイント
-  `[add]` → 追加で指摘が必要な事項(提出済みのレビュー文には説明がなかったもの)
-  `[attention]` → レビュー文の指摘が適切でなく、修正が必要なもの

## エンドユーザーテーブル
- ユーザーテーブルと商品テーブルがそれぞれ、管理者IDを持つ必要はあるでしょうか。どの管理者に管理されているユーザー、商品という情報は必要ないのではないでしょうか。
- [add]**エンドユーザーが退会した場合にもレコードが残るよう、論理削除が考慮する必要があります。レビュー文に追記しましょう。**
- [add]**ユーザーテーブル上の住所以外にも、配送先を持てる構造にする必要があるので、レビュー文に追記しましょう。**

## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日の記述もお願いいたします。もし持たないのであれば理由を教えてください。

## 商品テーブル
- 全体的に情報の種類に対しテーブルの数が少ないです。
商品テーブルにアルバム内の曲名カラムが存在していますが、１つのアルバムのディスクに数十曲入っているとかんがえると、非常に膨大な数の情報を商品テーブルに入れることになってしまいます。ジャンル、アーティスト、レーベル、ディスクについても同様です。テーブルを分別してください。

   → 商品テーブルに関する情報をデータベースとして正規化することを意識させましょう。
     正規化が分かっていないようであれば、直接テーブルに行って説明するのもアリです。
     この場合、下記のようなトピックに分割して説明していきましょう。
     ```
      1. 曲名カラムに複数の曲名を入れることの問題点
      2. 複数枚組が考慮されていない点
      3. アーティスト名、レーベル名、ジャンル名がテーブル化されていない点
     ```

- [add] **商品が削除された場合にもレコードが残るよう、論理削除が考慮する必要があります。なぜ必要なのか、具体例をレビュー文に追記しましょう。**
- [add] **ステータス(取り扱い)は、具体的に何の取り扱いについて管理するものなのか明記されていないので、明記させる必要があります。レビュー文に追記しましょう。**
- [add] **在庫数カラムがありますが、現在は入荷テーブルで管理しています。在庫数カラムで管理した場合の問題点を考え、レビュー文に追記しましょう。**

## カートテーブル
- カートテーブルにおいて、どのユーザーのカートなのかという情報が必要です。そのため、エンドユーザーIDカラムを追加してください。
- [add] **カートテーブルという命名は適切ではありません。簡単に理由も添えて、レビュー文に追記しましょう。**
- [add] **このテーブルで合計金額を持つ必要はありません。理由を考え、レビュー文に追記しましょう。**
- [add] このテーブルでアーティスト名、ジャケット画像、シングル/アルバム名のカラムを持つ必要はありません。(商品idをFKとして持っているので、商品テーブルから引用できます。)
- [add] PKが「注文ID」となっており、テーブル名と乖離しています。

## 決済テーブル
- 決済テーブルとありますが、これは購入者からの視点から考えると決済テーブルという命名でいいかもしれませんが、同じテーブルを管理者も使用することを考えると、優れた命名とは言えません。管理者とエンドユーザー、両視点から見てもわかりやすいテーブル名をつけてあげてください。（注文テーブルなど）
   - [attention] 「優れた命名」というように、優劣をつける言い方はなるべく避けた方が良いです。「適切でない」という言い方がベターです。
   - [attention] また、今回の場合、「支払いに関するデータのみを扱うものと誤解する可能性がある」という点が、命名規則が適切でない理由かと思います。
   
- [add] **購入日カラムは、「登録日」で代替可能です。**
- [add] **住所カラムがあるものの、郵便番号・氏名を入れるカラムが存在しません。**
- [add] **送料や合計金額を持っていないので、これらについてどのように確認するか質問する必要があります。**
- [add] **カートIDをFKとして持っていますが、不要です。カートテーブルを受注履歴と併用しようとするケースにたまに見られる構造なので、まずは理由を聞いて、もしそのケースに該当する場合は理由を添えてNGを出します。**

## 購入履歴
- 上と同様に、購入履歴テーブルとありますが、もう少しわかりやすい命名をしてください。（注文履歴テーブルなど）
   - [attention] 「わかりやすい命名」というよりは、「適切な命名」と言った方がベターです。「管理者視点で命名する必要がある」という観点が抜け落ちているだけだと思うので。

- [add] **購入ステータスがこのテーブルにあるのは適切ではありません。購入ステータス(注文受付・発送準備中・発送済など)は、受注ごとに管理されるべきで、商品ごとに管理されるものではないからです。**
- [add] **何を購入したか確認できる構造になっていないので、どうすればそれを実現できるか、ヒントを与えて下さい。**


# ER図2（提出済のもの）

**※ ER図1での指摘事項をヒントに、こちらも書き換えてみましょう。**

- ユーザーテーブルと商品テーブルがそれぞれ、管理者テーブルと連携する必要はあるのでしょうか。エンドユーザ、商品テーブルは管理者テーブルのIDを持たなくなりましたが、それぞれ一体他という形で接続されたままとなっております。

- テーブル同士のアソシエーションの表現の仕方で、一対他の記述の仕方が違います。一側の書き方を再度確認してください。

- 購入テーブルとありますが、「購入」という表現はエンドユーザーのみの視点でつけられた命名です。管理者側から見てもわかりやすいテーブル名に変更しましょう。（注文テーブルなど）

-エンドユーザーテーブル
   - 姓カラムはありますが、名カラムがありません。作成してください。
   - 一人のユーザーが多数の住所情報を持てるようにするため、住所情報は別にテーブルに分割しましょう。

-カート内商品アイテム
　- 小計カラムが存在している。商品の価格が変更された場合、このテーブルのデータはどうなりますか？

-曲名テーブル
　- 曲順を管理するためのカラムが必要ですね。

-カートアイテム テーブルと購入詳細テーブルがくっついていますが、これはどのような意図がありますか？それとも、描写の際に意図せずくっつけてしまっただけでしょうか。

# ER図1

## 全体
- 購入時のCD金額を格納するカラムがない。ので価格変動に対応できない。
- 曲順番、cdのディスク順番が判別できない
- 注文関連のテーブルが注文と命名していたり購入と命名していたりややこしい
- 入荷情報がない
<!-- 追記-->
- 注文した情報を管理するデータがない
- ところどころカーディナリティが不完全。
- 更新日、作成日がない

## エンドユーザ
- エンドユーザが管理者の子テーブルになっている。FKに管理者idがある。
- 住所登録が一つしかできない
<!-- 追記-->
- 論理削除用のカラムがない(今の段階だとユーザー情報ごと削除してしまう)

## 管理者
<!-- 追記-->
- ユーザーと商品の親テーブルになっている

## カート
- アーティストアルバム名等のカラムは関連テーブルから持ってこれるのでいらない
- ユーザ情報がない
- PKの命名規則が守られていない
- 〜さんのカート情報というデータにしたいためユーザと紐づけたいためユーザーの情報(FK)が必要

## 商品
- 曲は複数ある場合があるのでテーブルは分けるべき
- アーティスト、レーベル、ジャンルは商品ごとに重複する、親テーブルにすべき
- 発売日のデータがない
- 商品内にディスクが複数ある場合、曲が複数ある場合に対応できない
<!-- 追記-->
- ステータスカラムの用途が第三者からみてわかりづらい(販売ステータスとかに)
- 在庫数カラムは実際の在庫と入荷の数量が同一に格納される恐れがあるので入荷用の情報を別テーブルで管理できると良い
- 在庫数カラムは入荷数-購入数で表示できるの保持する必要ない
- 論理削除用のカラムがない
- 購入履歴とのリレーションが無い（購入履歴を保存する際、商品情報を取得できない。）

## 決済
- 購入日はcreated_atで作れる
- 送料含む合計金額があると良い
- 格納しているカラムが決済関連の役割以外のものがあるので命名を変えたほうがいい
- カートは複数あるのでFKにカートは必要ない
<!-- 追記-->
- テーブル名は管理者目線なので「決済」は不適切
- 配送先郵便番号、配送先氏名を格納できるカラムがない
- 送料、送付先の郵便番号、合計金額、消費税、送付先氏名を格納するカラムがない
- カート内の複数商品をまとめて決済するので関係性が不適切(FKはユーザーIDのみ)

## 購入履歴
- 発送状況は変動するので購入履歴というテーブルの中に格納するのは不適切
- 数量情報がない
<!-- 追記-->
- PK無し
- 商品のFKがないので履歴を表示する際商品情報を表示できない
- テーブルの命名は管理者視点なので、購入履歴は不適切
- 発送状況のみ保持しているテーブルなら、決済と合わせて1つのテーブルにまとめたほうがいい
- 商品とのリレーションが無い（購入履歴を保存する際、商品情報を取得できない。）
- 小計(購入時の商品購入金額)のデータの格納するカラムがない

**研修担当レビュー**
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>

## 全体
- Railsでデフォルトで作成される作成日、更新日カラムがありません。
- > PKの命名規則が守られていない

という指摘が複数ありますが、ER図の段階ではこの指摘は不要です。テーブル定義書で`id`となっていれば良いです。
(カートテーブルの指摘に関してはokです)

## エンドユーザー
- > 住所テーブルがあるなら郵便番号のテーブルがあると良い

こちら郵便番号テーブルは不要かと思います。

## 管理者
- 商品テーブルとリレーションがありますが、問題ありませんか？
- ユーザーが退会した場合該当のレコードはどうなりますか？

## 商品
- 複数枚ディスクが考慮されていません
- 商品を削除した場合該当のレコードはどうなりますか？
- `ステータス`というカラムがありますが、どのようなステータスかどうか判断がつかないためふさわしくないです
- 在庫数カラムがありますが問題ありませんか？

## カート
- テーブル名が実際の役割と異なると思いますが、問題ありませんか？
- 合計金額カラムは必要でしょうか？

## 決済
- > ユーザーのカーディナリティが0以上になっている

とありますが、どういった意味でしょうか？
- 送料カラムは必要ありませんか？
- 宛先住所を保持するカラムはありますが、宛先名、郵便番号を保持するカラムがありません。

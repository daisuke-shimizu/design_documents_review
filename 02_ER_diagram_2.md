# ER 図 2

## 全体

- 指摘事項

## テーブル名

- 指摘事項

# 注意

- マークダウン形式で記入してください。
- 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

## 全体

- 入荷したものを管理するテーブルが存在しない

- 配送先テーブルが存在しない

- カーディナリティの記述不足

- カーディナリティで1:Nの関係において記述がおかしい

- 管理者とエンドユーザー、管理者と商品のリレーションがいらない

## ユーザー

- PKはエンドユーザーidとならなければいけない

- 名カラムがない

##　商品

- 発売日カラムがない

- ディスクidカラムが必要ない

- 在庫枚数カラムが必要ない

- ディスク枚数カラムが必要ない

## ディスク

- トラックNo. カラムからは何のカラムなのか連想できないため、ディスクNo.カラムにする必要がある

## カートアイテム

- PKのidカラムがない

- 小計は算出可能な値のため、カラムに保存する必要がない

## 曲名

- 曲の順番を管理するためのカラムがない

- ディスクと結びつくためのFKが存在していない

## 購入

- 配送ステータスを保存するためのカラムがない

- 支払い方法を指定するためのカラムがない

- 管理者目線のテーブルなので購入ではなく受注にテーブル名を変える

- 購入日カラムがcreated_atと重複している

## 購入詳細

- 小計金額が必要ない

- 購入詳細ではなく受注詳細に変える

- 購入時の値段を保存するカラムが必要

- FKとして商品idが必要

## ジャンル

- ジャンル名にカラムを変更する

## レーベル

- レーベル名にカラムを変更する

## レビュー
## 全体
- 曲テーブルがない場合、どのように曲を管理しますか？(ディスクテーブルで曲を管理するとデータが重複します。)
- 入荷したものを管理する場所がありません。
- カーディナリティの不足、過剰を具体的にお願いします。

## ユーザー
- 郵便番号はどうして不要なのでしょうか？
- ディスク枚数カラムはデータとして保存する必要があるでしょうか？
- 在庫数カラムは計算結果(入荷数-売り上げ)なのでデータとして保存するには適しません。(代わりに生のデータである入荷数が必要になります。)

## ディスク
- トラックnoカラムのカラム名から役割が連想できません。
- 商品とのリレーションは正しくない

## 曲
- 曲順はどのように管理するのでしょうか？
- ディスクとのリレーションが正しくない

## 購入
- 命名は管理者目線が好ましいです。(購入はユーザー視点なので、受注など)
- 購入日カラムはcreated_atと役割が重複しています。

## 購入詳細
- 命名は管理者目線が好ましいです。(購入詳細はユーザー視点なので、受注詳細など)
- 購入時の値段を保存するカラムがありません。
- 購入テーブルと購入詳細テーブルのリレーションが正しくない

## ジャンル、レーベル
- ジャンル、レーベルカラムがあるが、役割が不明です。


# レビュー2回目

## 全体
- 管理者のカーディナリティがいらない
  > 正しくは、管理者とエンドユーザ、管理者と商品のリレーションが必要ないです。

- ユーザーテーブル名がエンドユーザーになっている
  > エンドユーザではダメですか？理由をお願いします。

## ユーザー
- 配送先テーブルの FK がない
  > 本当に必要でしょうか？ユーザと配送先のカーディナリティを確認してみましょう。

- 配送先カラムがいらない
  > 必要です。ここに保存される配送先は、ユーザのデフォルトで使用される配送先情報になります。

- PKはエンドユーザidとなるべきです。

##　商品
- 商品名カラムがない
  > シングル/アルバム名 = 商品名です。

- ディスクカラムが必要ない
  > ディスクidカラムのことですか？

- また、入荷数カラムが必要
  > 入荷テーブルがあれば、入荷数カラムは必要ありません。

## ディスク
- 曲名カラムがない
  > 曲名はディスクテーブルに保存しますか？

- 商品とのリレーションは正しいですか？

## カートアイテム
- 購入商品を保存するためのカラムがない
  > 商品とカートアイテムはリレーションがあるため、購入商品を保存するためのカラムは必要ありません。
  
- PKのidカラムがありません。

- 小計は、商品価格と数量から算出できるため不要です。

## 曲名
- ディスクとのリレーションは正しいですか？

## 購入
- 購入方法を指定するためのカラムがない
  > 支払い方法のことですか？

## 購入詳細
- 購入と購入詳細のカーディナリティは正しいですか？

- FKとして商品idが必要です。


# レビュー3回目

## カートアイテム
- 小計は算出可能な値なので、カラムに保存する必要がありません。

## 購入詳細
- 購入テーブルと購入詳細テーブルのリレーションは正しいですか？

## ディスク
- 商品とのリレーションは正しいですか？

## 曲
- ディスクとのリレーションは正しいですか？

<font color="Red">合格です！！</font>
